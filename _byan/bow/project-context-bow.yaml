# Book of Work (BOW) - Project Context
# Generated by BYAN Interview Workflow
# Date: 2026-02-09
# Version: 1.0.0

project_name: "book-of-work"
project_display_name: "Book of Work (BOW)"
project_description: "Application metier de gestion de projets pour un groupe financier base a Londres avec des connexions internationales. Couvre la gestion des taches, la gouvernance, les fournisseurs, le risk management et les settings."
domain: "Finance - Project & Risk Management"
subdomain: "Enterprise Governance, Risk & Compliance (GRC)"
maturity_level: "dev"
methodology: "TDD + CI/CD"
developer: "Adriano (solo)"
assisted_by: "BYAN + 7 agents IA specialises"

# --- TECHNICAL STACK ---
stack_tech:
  backend:
    - "Laravel 11 (PHP 8.3)"
    - "Eloquent ORM"
    - "Laravel Sanctum (Auth)"
    - "Spatie Activity Log"
    - "Spatie Permission"
    - "Maatwebsite/Excel 3.1"
    - "PHPUnit 10.5 / Pest 2.34"
  frontend:
    - "Next.js 15 (App Router)"
    - "React 18"
    - "TypeScript 5.3"
    - "Shadcn/ui (Radix UI)"
    - "Tailwind CSS 3.4"
    - "Zustand 4.5"
    - "React Hook Form + Zod"
    - "TanStack Table + Query"
    - "Recharts 2.10"
    - "Axios 1.6"
  infrastructure:
    - "Docker + Docker Compose"
    - "Traefik (Reverse Proxy + SSL)"
    - "PostgreSQL 16"
    - "Redis 7"
    - "GitHub Actions (CI/CD)"
  databases:
    - "PostgreSQL 16 (primary)"
  constraints:
    - "On-premise deployment"
    - "Multi-timezone (London, Monaco, Dubai, Singapore, Australia)"
    - "Multi-currency (GBP primary)"
    - "Excel import/export obligatoire"
    - "TDD mandatory"
    - "CI/CD pipeline"

# --- TEAM ---
team_size: 1
team_skills:
  - "Full-stack (Laravel + Next.js)"
  - "Assiste par agents IA specialises"

# --- PAIN POINTS ---
pain_points:
  - "Zero tests automatises"
  - "Pas de pipeline CI/CD"
  - "Normalisation imports Excel (doublons, encodages)"
  - "Securite a renforcer (secrets hardcodes, pas de rate limiting, pas de 2FA)"
  - "Contexte switching entre 5 modules complexes"
root_cause: "Projet solo avec scope large necessitant expertise multi-domaines"

# --- GOALS ---
goals:
  - "Optimiser la productivite solo grace a 7 agents specialises"
  - "Implementer TDD sur l'ensemble du projet"
  - "Mettre en place CI/CD"
  - "Finaliser le Sprint 7 (Frontend)"
  - "Securiser l'application pour la production"
success_criteria:
  - "Couverture de tests > 80%"
  - "Pipeline CI/CD fonctionnel"
  - "Import Excel fiable avec deduplication"
  - "Zero faille OWASP Top 10"
  - "Frontend complet pour les 5 modules"

# --- GLOSSAIRE (18 concepts) ---
glossaire:
  work_item:
    definition: "Unite de travail tracee dans le systeme avec un responsable, une deadline, un statut et un RAG calcule automatiquement. Peut etre BAU ou Transformatif."
    synonyms: ["Tache", "Deliverable", "Item"]
    examples: ["Migration base de donnees", "Audit trimestriel", "Deploiement v2"]

  rag_status:
    definition: "Indicateur visuel automatique base sur la deadline : Blue (termine), Green (>14j), Amber (<7j ou pas demarre <14j), Red (en retard)."
    synonyms: ["Statut feu tricolore"]
    examples: ["Green = projet en bonne voie", "Red = deadline depassee"]

  governance_item:
    definition: "Activite de gouvernance recurrente liee a une localisation et une frequence (mensuelle a ad-hoc). Separee des Work Items."
    synonyms: ["Point de gouvernance"]
    examples: ["Comite d'audit trimestriel", "Revue de conformite annuelle"]

  supplier:
    definition: "Fournisseur avec support multi-entites, categories Sage, et suivi de contrats/factures. Statuts : Active, Exited, Pending."
    synonyms: ["Fournisseur", "Vendor"]
    examples: ["Bloomberg", "Refinitiv", "Cabinet d'audit"]

  contract:
    definition: "Contrat fournisseur avec dates, valeur, devise, renouvellement automatique et systeme d'alertes (90 jours par defaut)."
    synonyms: ["Contrat fournisseur"]
    examples: ["Licence annuelle Bloomberg", "Contrat maintenance IT"]

  invoice:
    definition: "Facture fournisseur avec montant, devise, taux de change, conversion GBP. Import en masse par Excel."
    synonyms: ["Facture"]
    examples: ["Facture mensuelle hosting", "Facture trimestrielle audit"]

  risk_l3:
    definition: "Risque individuel avec scores d'impact (financier, regulatoire, reputationnel) et probabilite sur echelle 1-5. ID auto-genere (ex: CH-P-OPS-03-01)."
    synonyms: ["Risque specifique"]
    examples: ["Fuite de donnees clients", "Non-conformite GDPR"]

  risk_theme_l1:
    definition: "Classification de haut niveau : REG (Regulatoire), GOV (Gouvernance), OPS (Operationnel), BUS (Business), CAP (Capital). Chaque theme a un Board Appetite (1-5)."
    synonyms: ["Theme de risque"]
    examples: ["REG = risques regulatoires", "OPS = risques operationnels"]

  risk_category_l2:
    definition: "Subdivision d'un theme avec code unique (ex: P-REG-01). Fait le lien entre theme et risques individuels."
    synonyms: ["Categorie de risque"]
    examples: ["P-REG-01 = Conformite reglementaire", "P-OPS-03 = Continuite d'activite"]

  control:
    definition: "Mesure de mitigation d'un risque avec une valeur de reduction. Les controles sont stockes dans une bibliotheque reutilisable (ControlLibrary)."
    synonyms: ["Controle", "Mesure de mitigation"]
    examples: ["Firewall", "Audit annuel", "Double validation"]

  board_appetite:
    definition: "Seuil de tolerance au risque defini par le conseil d'administration, par theme (echelle 1-5). Determine si un risque est OK ou OUTSIDE."
    synonyms: ["Appetit au risque"]
    examples: ["Appetite REG = 2 (faible tolerance)", "Appetite BUS = 4 (tolerance elevee)"]

  entity:
    definition: "Entite geographique/juridique de l'entreprise (London, Monaco, Dubai, Australia, Global). Les suppliers et contrats sont lies a des entites."
    synonyms: ["Entite juridique", "Site"]
    examples: ["London (siege)", "Dubai (bureau regional)", "Global (toutes entites)"]

  department:
    definition: "Unite organisationnelle qui sert de base au systeme de permissions. Les users ont des droits granulaires par departement."
    synonyms: ["Service", "Area"]
    examples: ["IT", "Finance", "Compliance", "Operations"]

  sage_category:
    definition: "Categorie comptable pour l'integration avec le logiciel Sage. Double categorisation possible par fournisseur."
    synonyms: ["Categorie comptable"]
    examples: ["7600 = Services externes", "6200 = Honoraires"]

  setting_list:
    definition: "Valeurs dynamiques configurables (departements, activites, categories fournisseur) qui alimentent les listes deroulantes de l'application."
    synonyms: ["Listes de reference"]
    examples: ["Liste des departements", "Liste des types d'activite"]

  risk_action:
    definition: "Action de remediation liee a un risque specifique avec un responsable, une priorite (High/Medium/Low), un statut (Open/In Progress/Completed/Overdue) et une date d'echeance."
    synonyms: ["Action corrective", "Remediation"]
    examples: ["Mettre a jour le firewall avant le 30/03", "Former l'equipe GDPR"]

  milestone:
    definition: "Jalon de projet avec date cible et statut, assignable a des utilisateurs. Utilisable sur les Work Items et les Governance Items."
    synonyms: ["Jalon"]
    examples: ["Go-live v2", "Fin de phase audit", "Livraison MVP"]

  task_assignment:
    definition: "Affectation d'un utilisateur a un Work Item avec un role : Owner (responsable principal) ou Member (contributeur). Un Work Item peut avoir plusieurs assignes. Chaque assignation constitue un engagement (RG-BOW-014) necessitant un accuse de reception."
    synonyms: ["Affectation", "Engagement"]
    examples: ["Adriano = Owner (accuse le 15/02)", "Marie = Member (en attente d'accuse)"]

# --- ACTEURS ---
acteurs:
  - name: "Admin"
    type: "internal"
    permissions: ["CRUD all modules", "User management", "System settings", "Notifications"]
    description: "Administrateur systeme avec acces total"

  - name: "Member"
    type: "internal"
    permissions: ["can_view", "can_edit_status", "can_create_tasks", "can_edit_all (par departement)"]
    description: "Utilisateur standard avec acces granulaire par departement"

  - name: "Risk Theme Owner"
    type: "internal"
    permissions: ["can_view", "can_edit_status", "can_create_risks", "can_edit_all (par theme)"]
    description: "Responsable d'un domaine de risque avec permissions specifiques par theme"

  - name: "Systeme"
    type: "system"
    permissions: ["Calcul RAG auto", "Scoring risques", "Alertes contrats", "Jobs asynchrones", "Scheduler"]
    description: "Processus automatises du systeme"

  - name: "Sage"
    type: "external"
    permissions: ["Integration comptable (categories, sync)"]
    description: "Logiciel comptable externe pour integration categories"

# --- PROCESSUS METIER ---
processus_metier:
  - name: "Cycle de vie Work Item"
    description: "Creation -> Assignment (Owner/Member) -> Suivi RAG auto -> Monthly updates -> Completion (Blue)"
    steps: ["Create", "Assign", "Track RAG", "Update monthly", "Complete"]
    criticity: "high"

  - name: "Gestion des Risques 3 niveaux"
    description: "Theme(L1) -> Category(L2) -> Risk(L3) -> Scoring -> Controls -> Residual -> Appetite check -> Actions"
    steps: ["Create Theme", "Create Category", "Create Risk", "Score", "Add Controls", "Calculate Residual", "Check Appetite", "Create Actions"]
    criticity: "critical"

  - name: "Cycle contrat fournisseur"
    description: "Creation supplier -> Lien entites -> Contrat (dates, valeur) -> Alerte auto 90j -> Renouvellement ou sortie"
    steps: ["Create Supplier", "Link Entities", "Create Contract", "Track Expiry", "Alert", "Renew or Exit"]
    criticity: "high"

  - name: "Import Excel"
    description: "Upload fichier -> Preview + column mapping -> Validation -> Normalisation/deduplication -> Job asynchrone -> Rapport erreurs"
    steps: ["Upload", "Preview", "Map Columns", "Validate", "Normalize", "Import Job", "Report"]
    criticity: "high"

  - name: "Export Excel"
    description: "Selection module -> Generation fichier formate (headers bold, colonnes auto-size, dates standardisees)"
    steps: ["Select Module", "Generate", "Format", "Download"]
    criticity: "medium"

  - name: "Calcul RAG automatique"
    description: "A chaque modification : Blue=done, Green=>14j, Amber=<7j, Red=overdue"
    steps: ["Detect Change", "Calculate Deadline Delta", "Assign RAG", "Update Record"]
    criticity: "critical"

  - name: "Scoring risque"
    description: "Inherent = max(financial, regulatory, reputational) x probability. Residual = inherent - reductions (cap 70%). Tier A/B/C. Appetite OK/OUTSIDE"
    steps: ["Calculate Impacts", "Max Impact", "Multiply Probability", "Sum Controls", "Cap 70%", "Residual", "Assign Tier", "Check Appetite"]
    criticity: "critical"

  - name: "Gestion permissions"
    description: "Admin assigne droits par departement (4 niveaux) + par theme risque (4 niveaux)"
    steps: ["Select User", "Assign Department Permissions", "Assign Risk Theme Permissions", "Validate"]
    criticity: "high"

  - name: "Gouvernance"
    description: "Items recurrents avec frequence + location -> Milestones -> Documents -> RAG auto"
    steps: ["Create Item", "Set Frequency", "Set Location", "Add Milestones", "Attach Documents", "Track RAG"]
    criticity: "medium"

# --- REGLES DE GESTION ---
regles_gestion:
  - id: "RG-BOW-001"
    description: "Le RAG est calcule automatiquement, jamais manuellement"
    priority: "critical"
    regulatory: false
    module: "Global"

  - id: "RG-BOW-002"
    description: "Un Work Item peut avoir plusieurs Owners et Members"
    priority: "high"
    regulatory: false
    module: "Work Items"

  - id: "RG-BOW-003"
    description: "Score inherent risque = max(3 impacts) x probabilite, maximum 25"
    priority: "critical"
    regulatory: true
    module: "Risk Management"

  - id: "RG-BOW-004"
    description: "Reduction controles cumulee plafonnee a 70%"
    priority: "critical"
    regulatory: true
    module: "Risk Management"

  - id: "RG-BOW-005"
    description: "Risk Tier : A (>=9), B (4-8), C (<4) base sur score residuel"
    priority: "critical"
    regulatory: true
    module: "Risk Management"

  - id: "RG-BOW-006"
    description: "Appetite Status : OK si residuel <= appetite, OUTSIDE sinon"
    priority: "critical"
    regulatory: true
    module: "Risk Management"

  - id: "RG-BOW-007"
    description: "Alerte contrat 90 jours avant expiration (configurable)"
    priority: "high"
    regulatory: false
    module: "Suppliers"

  - id: "RG-BOW-008"
    description: "Import Excel : deduplication obligatoire (users, suppliers, entites)"
    priority: "critical"
    regulatory: false
    module: "Import"

  - id: "RG-BOW-009"
    description: "Encodage normalise a l'import (UTF-8, ISO-8859-1, Windows-1252, BOM)"
    priority: "high"
    regulatory: false
    module: "Import"

  - id: "RG-BOW-010"
    description: "5 Risk Themes fixes : REG, GOV, OPS, BUS, CAP"
    priority: "high"
    regulatory: true
    module: "Risk Management"

  - id: "RG-BOW-011"
    description: "Permissions member : granulaires par departement ET par theme risque"
    priority: "high"
    regulatory: false
    module: "Auth"

  - id: "RG-BOW-012"
    description: "Double categorisation Sage possible par fournisseur"
    priority: "medium"
    regulatory: false
    module: "Suppliers"

  - id: "RG-BOW-013"
    description: "Factures avec conversion multi-devises vers GBP (taux de change)"
    priority: "high"
    regulatory: true
    module: "Suppliers"

  - id: "RG-BOW-014"
    description: "Toute assignation de tache constitue un engagement. L'assigne doit accuser reception sur la plateforme. Notifications email : attribution (sauf self-assign), J-14 avant deadline, Jour J (deadline), J+1 si non validee (escalade chef equipe + Ranjit), rapport hebdomadaire CEO (taches <=14j). Les emails incluent un fichier .ics (iCalendar) pour ajouter la deadline au calendrier."
    priority: "high"
    regulatory: false
    module: "Work Items"

# --- EDGE CASES ---
edge_cases:
  - "Import doublons : 'John Smith' vs 'J. Smith' vs 'john smith' - strategie de matching a definir"
  - "Contrats multi-entites : un contrat global peut couvrir plusieurs entites avec des montants differents"
  - "Risques lies : un risque peut impacter plusieurs Work Items et Governance Items simultanement"
  - "Permissions conflictuelles : user avec can_edit_all sur departement mais can_view sur theme risque lie"
  - "Fuseaux horaires : equipes London, Monaco, Dubai, Singapore, Australia - deadlines et alertes coherentes"
  - "Heatmap 5x5 : risques avec meme impact/probabilite s'empilent dans la meme cellule"

# --- AGENTS ---
agents:
  - name: "bow-product-manager"
    role: "Product Manager BOW Expert"
    status: "draft"

  - name: "bow-backend-expert"
    role: "Backend Expert Laravel + PostgreSQL"
    status: "draft"

  - name: "bow-frontend-expert"
    role: "Frontend Expert UX/UI React Next.js"
    status: "draft"

  - name: "bow-architect"
    role: "Architecte Systeme"
    status: "draft"

  - name: "bow-qa-tester"
    role: "QA Tester TDD"
    status: "draft"

  - name: "bow-devsecops"
    role: "DevSecOps - Securite Applicative"
    status: "draft"

  - name: "bow-github-expert"
    role: "GitHub Expert CI/CD"
    status: "draft"

  - name: "bow-excel-specialist"
    role: "Excel Import/Export Specialist"
    status: "active"

  - name: "bow-infra-deployer"
    role: "Infrastructure & Deployment Specialist - OVH, staging, production, SMTP, DNS, SSL"
    status: "active"

# --- METADATA ---
metadata:
  created_by: "BYAN Interview Workflow"
  created_at: "2026-02-09"
  interview_duration: "~30 min"
  platform: "claude"
  byan_version: "1.0.0"
